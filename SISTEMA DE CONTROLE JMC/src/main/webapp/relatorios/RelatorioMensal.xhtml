<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="../templates/administrador.xhtml">
  <ui:define name="content">
    <h:form prependId="false" id="growlForm">
      <p:growl id="growl" showDetail="false" />
    </h:form>
    <h:form prependId="false" id="dataForm">       
	<p:commandButton id="anteriorButton" update=":dataForm:field" value="Anterior" action="#{relatorioMesBean.anterior}" />
	<p:commandButton id="proximoButton" update=":dataForm:field" value="Próximo" action="#{relatorioMesBean.proximo}" />	
	<br/><br/>
	<p:fieldset id="field" legend="Relatorio de Desempenho Mensal - #{relatorioMesBean.dataLabel}">
        <p:dataTable id="list" var="linha" value="#{relatorioMesBean.resumos}"  >
       	<f:facet name="header" width="1800" >Relatorio de Despenho Mensal</f:facet>
        	<p:subTable var="item" value="#{linha.classificacoes}" >
        	<f:facet name="header">
        		<h:outputText  value="#{linha.name}" />
        	</f:facet>        	
	        	<p:column >
	                <h:outputText value="#{item.codigo}" />
	        	</p:column>	 
	        	<p:column   width="200">
	                <h:outputText value="#{item.name}"/>
	        	</p:column>
	        	<p:column >
	                <h:outputText value="%" />
	        	</p:column>
		        	<p:column style="text-align:center">
	        	<ui:repeat var="total" value="#{item.itens}">
		        		<h:outputText value="#{total.campos[relatorioMesBean.ultimoDiaDoMes]}">
			        			<f:convertNumber currencyCode="BRL" minIntegerDigits="2" />
		        		</h:outputText>
	        	</ui:repeat>
		        	</p:column> 
        	</p:subTable>	
        	<f:facet name="footer" width="1800">Relatorio de Despenho Mensal</f:facet>          	        	       	       	
        </p:dataTable>
    </p:fieldset>
    </h:form>
     <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
		<p:dialog id="loading" widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
	    <p:graphicImage name="/images/carregando.gif" />
	</p:dialog>
  </ui:define>
</ui:composition>
</html>